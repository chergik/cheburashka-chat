// Generated by CoffeeScript 1.9.0
(function() {
  define(function(require) {
    var Chat, chat, ebus, io;
    io = require('lib/socket')();
    ebus = require('lib/event_bus')();
    Chat = (function() {
      function Chat() {
        this.setupHandlers();
      }

      Chat.prototype.sendMessage = function(msg) {
        return io.emit('chat message', msg);
      };

      Chat.prototype.joinUser = function(user) {
        return io.emit('join', user);
      };

      Chat.prototype.setupHandlers = function() {
        io.on('chat message', function(data) {
          return ebus.trigger('message', data);
        });
        io.on('join', function(user) {
          return ebus.trigger('join', user);
        });
        return io.on('left', function(user) {
          return ebus.trigger('left', user);
        });
      };

      return Chat;

    })();
    chat = new Chat;
    return function() {
      return chat;
    };
  });

}).call(this);
